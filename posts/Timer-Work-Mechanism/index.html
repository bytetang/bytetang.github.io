<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="layout-lang" content="en"><meta name="day-prompt" content="d ago"><meta name="hour-prompt" content="hr ago"><meta name="minute-prompt" content="min ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Android Timer Work Mechanism And Usage Guideline" /><meta name="author" content="Morse" /><meta property="og:locale" content="en" /><meta name="description" content="Background" /><meta property="og:description" content="Background" /><link rel="canonical" href="https://bytetang.github.io//posts/Timer-Work-Mechanism/" /><meta property="og:url" content="https://bytetang.github.io//posts/Timer-Work-Mechanism/" /><meta property="og:site_name" content="Morse" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-27T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Android Timer Work Mechanism And Usage Guideline" /><meta name="twitter:site" content="@Morse84538291" /><meta name="twitter:creator" content="@Morse" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Morse"},"description":"Background","headline":"Android Timer Work Mechanism And Usage Guideline","dateModified":"2021-07-28T18:47:57+08:00","datePublished":"2021-05-27T00:00:00+08:00","url":"https://bytetang.github.io//posts/Timer-Work-Mechanism/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bytetang.github.io//posts/Timer-Work-Mechanism/"},"@context":"https://schema.org"}</script><title>Android Timer Work Mechanism And Usage Guideline | Morse</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Morse"><meta name="application-name" content="Morse"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang=""><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn.jsdelivr.net/gh/cotes2020/chirpy-images/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Morse</a></div><div class="site-subtitle font-italic">一介码农</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/bytetang" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/Morse84538291" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Android Timer Work Mechanism And Usage Guideline</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Android Timer Work Mechanism And Usage Guideline</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Morse </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, May 27, 2021, 12:00 AM +0800" >May 27<i class="unloaded">2021-05-27T00:00:00+08:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 28, 2021, 6:47 PM +0800" >Jul 28<i class="unloaded">2021-07-28T18:47:57+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="784 words">4 min read</span></div></div><div class="post-content"><h1 id="background">Background</h1><p>Timer components are used for a time countdown in events and campaigns like rewards preview entries, tournament bucket, and tournament all-in-one list, invite friend events and so on. But it’s dangerous if developers are not familiar with it. It’s necessary to define the guideline for the usage of the timer. And this doc will list the cases we had faced in the past.</p><p><b>How does the countdown work?</b></p><p>Use Timer scheduleAtFixedRate , execute tasks on <code class="language-plaintext highlighter-rouge">run()</code> of TimerTask class. multiple threads can share a single Timer object without the need for external synchronization. Use CountDownTimer. Handle the time on <code class="language-plaintext highlighter-rouge">onTick()</code> callback function. The callback is a synchronized block</p><p><b>The Lifecycle of Timer and CountDownTimer</b></p><p>For Timer, after the last live reference to a Timer object goes away and all outstanding tasks have completed execution, the timer’s task execution thread terminates gracefully (and becomes subject to garbage collection). However, this can take arbitrarily long to occur. Reference to</p><p><a href="https://developer.android.com/reference/java/util/Timer">https://developer.android.com/reference/java/util/Timer</a>.</p><p>So we know that Timer might not recycle automatically as we expected.</p><p>For CountDownTimer, when calling the <code class="language-plaintext highlighter-rouge">start()</code> function. The handler will send a message to the looper interval at the fixed time. Execute on <code class="language-plaintext highlighter-rouge">onTicket()</code> when the <code class="language-plaintext highlighter-rouge">handleMessage()</code> . the onTicket is executed in a thread-safe way. But the handler won’t stop until the <code class="language-plaintext highlighter-rouge">cancel()</code> call.</p><h1 id="examples">Examples</h1><h2 id="1-timer-leak-in-activity--fragment--dialog">1. Timer Leak in Activity / Fragment / Dialog</h2><p>A task will be added into taskQuene when calling the sched or scheduleXX function.</p><p>The main looper thread consumes the task queue continuously. If the task finishes, This task reference will be removed from the task queue. That’s why the task thread can be terminated peacefully.</p><p><b>When the leak occurs</b></p><p>when the task is running, but the host page is destroyed. Timer doesn’t know when the page has been destroyed, so the task keeps running, the task might hold the page reference, causing the page reference leak. Which we expect is that the task also needs to be terminal.</p><p><b>How to resolve</b></p><p>Calling the <code class="language-plaintext highlighter-rouge">cancel()</code> when the Activity <code class="language-plaintext highlighter-rouge">OnDestroy()</code>. <code class="language-plaintext highlighter-rouge">Cancel()</code> function will clear the task queue. All the references will be released, and this is a thread-safe option.</p><h2 id="2-timer-used-in-recyclerview">2. Timer used in RecyclerView</h2><p><b>ViewHolder lifecycle</b></p><p>First we must know the recycling mechanism of RecyclerView. It’s pretty different from the ListView.</p><p>When there is a new set of data to display on the screen, <code class="language-plaintext highlighter-rouge">onBindViewHolder</code> will be triggered to bind the data to the new item views for the user.But when these become invisible on screen (user scroll view away), the invisible views will be removed from the parent view(RecyclerView). Note the ViewHolder might be kept in memory for better performance,so at the time the variables have not been recycled yet.</p><p>If the user scrolls back to the previous item view, the <code class="language-plaintext highlighter-rouge">onBindViewHolder</code> will be triggered again. Developers need to rebind the ViewHolder data, but it might be obtained from the cached <code class="language-plaintext highlighter-rouge">ViewHolder</code>.</p><p>Generally, When the ViewHolder is reused, resetting the ViewHolder fields will refresh the data and bind to the new views. So it’s always right whatever the user scrolls.</p><p>Then, what will happen when a timer is kept in the ViewHolder?</p><p>A ViewHolder with a CountDownTimer</p><p><img width="521" alt="image" src="https://user-images.githubusercontent.com/6038077/127305083-99cf61c4-9158-4b7e-9c64-e0e52ddd7cb7.png" /></p><p>The bindViewData function called by onBindViewHolder</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">override</span> <span class="n">fun</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="nl">holder:</span> <span class="nc">ViewHolder</span><span class="o">,</span> <span class="nl">position:</span> <span class="nc">Int</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">bindViewData</span><span class="o">(</span><span class="s">"Timer$position"</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Test scroll the list to bottom, then back to the top of the page.</p><p>Check the run result here: <a href="https://drive.google.com/file/d/1G0iM1DtwV-4GVSk8BZqxFA35WjNjnhi6/view?usp=sharing">https://drive.google.com/file/d/1G0iM1DtwV-4GVSk8BZqxFA35WjNjnhi6/view?usp=sharing</a></p><p>You can find the count-down text performs not as expected and flash continuously, Seems another timer still updates the same item view. onBindViewHolder event reset the Timer when the RecyclerView starts to reuse, so the countDownTimer value be covered with a new instance, but what causes the text flash?</p><p><b>Root Reason</b></p><p>As the “ViewHolder Behavior” chapter said, the ViewHolder might be cached and reused, then the timer still kept in memory, through the countDownTimer be reset to a new instance, but the timer differs with other components. CountDownTimer maintain a thread looper and interval send the message to the onTicket() , the lifecycle of looper longer than ViewHolder, if ViewHolder need to recycled or reset, the memory can’t released since the anonymous CountDownTimer caused the leak happened, so there are multiple CountTimer exists. That’s why the text flashes.</p><p><b>How to resolve</b></p><p>Manually cancel the timer when the ViewHolder recycle or detach</p><p><img width="513" alt="image" src="https://user-images.githubusercontent.com/6038077/127305416-04b6d02a-903a-4e41-be64-87112e2278bd.png" /></p><p>If you want to countdown from the last time, save the last time on OnViewDetachedFromWindow() and recover the last time countdown on onViewAttachedToWindow is a good choice.</p><h1 id="summaries">Summaries</h1><p>The core of the approach to resolve the Timer leak is simple: <b>Call Timer cancel at the right time!!!</b></p><ul><li>For Activity, cancel the Timer in <code class="language-plaintext highlighter-rouge">OnDestory()</code> , for Fragment cancel in <code class="language-plaintext highlighter-rouge">onDestroyView()</code><li>For RecyclerView or GridView, cancel and release Timer in <code class="language-plaintext highlighter-rouge">onViewDetachedFromWindow()</code> or <code class="language-plaintext highlighter-rouge">onViewRecycled()</code></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/android/'>Android</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/timer/" class="post-tag no-text-decoration" >Timer</a> <a href="/tags/thread/" class="post-tag no-text-decoration" >Thread</a> <a href="/tags/architecture/" class="post-tag no-text-decoration" >architecture</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Android Timer Work Mechanism And Usage Guideline - Morse&url=https://bytetang.github.io//posts/Timer-Work-Mechanism/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Android Timer Work Mechanism And Usage Guideline - Morse&u=https://bytetang.github.io//posts/Timer-Work-Mechanism/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Android Timer Work Mechanism And Usage Guideline - Morse&url=https://bytetang.github.io//posts/Timer-Work-Mechanism/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Timer-Work-Mechanism/">Android Timer Work Mechanism And Usage Guideline</a><li><a href="/posts/android-ci/">从零搭建Android持续集成平台</a><li><a href="/posts/mask/">Mask掩码运算及其应用</a><li><a href="/posts/applink/">Applink</a><li><a href="/posts/android-codereview/">Android Code Review</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/ci/">CI</a> <a class="post-tag" href="/tags/thread/">Thread</a> <a class="post-tag" href="/tags/applink/">Applink</a> <a class="post-tag" href="/tags/architecture/">architecture</a> <a class="post-tag" href="/tags/codereview/">CodeReview</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/login/">Login</a> <a class="post-tag" href="/tags/mask/">Mask</a> <a class="post-tag" href="/tags/timer/">Timer</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/threading/"><div class="card-body"> <span class="timeago small" >Mar 27, 2019<i class="unloaded">2019-03-27T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>安卓并发编程全解析</h3><div class="text-muted small"><p> 多线程是开发中较为高阶的知识，但是涉及到的知识点非常的多。设计或写多线程的代码需要谨慎处理，前提是我们要有比较系统性的认识。 一、从Thread Stack认识线程 在android开发中我们通常会在发生卡顿或者ANR的时候，去拿手机里的traces.txt做分析，这里面dump了ANR出现时的线程状态。我们以traces.txt里面的堆栈为例，认识下线程。 位置: data/anr/t...</p></div></div></a></div><div class="card"> <a href="/posts/applink/"><div class="card-body"> <span class="timeago small" >Jan 15, 2019<i class="unloaded">2019-01-15T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Applink</h3><div class="text-muted small"><p> 内容概念： 概念及分类 市场使用 唤起App机制 流转过程 App Link 通过一些技术手段有途径能唤起我们app的URI，我们统称为App Link 唤醒技术手段 Uri Scheme（DeepLink） Universal Link（iOS）、App Links（Android） Deferred DeepLink Uri Scheme ...</p></div></div></a></div><div class="card"> <a href="/posts/android-codereview/"><div class="card-body"> <span class="timeago small" >Feb 27, 2019<i class="unloaded">2019-02-27T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android Code Review</h3><div class="text-muted small"><p> 空指针篇 【建议】字符串比较，将常量放在前面 case: static final String DOMESTIC = "1" domestic.equals(DOMESTIC); 修正为： DOMESTIC.equals(domestic); 页面间对象传参在数据不完整的情况下崩溃，多数情况下是因为接收到了空的传参未处理直接调用，建议不要依赖调用方的”安全”使用。...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/workflow-sso/" class="btn btn-outline-primary" prompt="Older"><p>OAuth2.0认证授权workflow</p></a> <a href="/posts/spec-git-message/" class="btn btn-outline-primary" prompt="Newer"><p>Write a canonical Git Commit Message</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">your_full_name</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/android/">Android</a> <a class="post-tag" href="/tags/ci/">CI</a> <a class="post-tag" href="/tags/thread/">Thread</a> <a class="post-tag" href="/tags/applink/">Applink</a> <a class="post-tag" href="/tags/architecture/">architecture</a> <a class="post-tag" href="/tags/codereview/">CodeReview</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/login/">Login</a> <a class="post-tag" href="/tags/mask/">Mask</a> <a class="post-tag" href="/tags/timer/">Timer</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://bytetang.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
